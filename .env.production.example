# ============================================================================
# TarotOutMyHeart - Production Environment Configuration
# ============================================================================
#
# This file shows the recommended environment variables for production
# deployment to Vercel. It does NOT contain actual secrets (those belong
# in the Vercel dashboard or GitHub secrets).
#
# HOW TO USE:
# 1. This is a REFERENCE file only - do NOT copy/modify in version control
# 2. View this file to understand what variables production needs
# 3. Set actual values in Vercel dashboard: Settings → Environment Variables
# 4. Set the environment to "Production" for production-specific variables
# 5. Optionally set "Preview" environment with different values (e.g., mocks)
#
# SECURITY CRITICAL:
# - Never commit actual API keys to GitHub
# - Never hardcode secrets in .env files
# - All secrets must be set in Vercel dashboard (encrypted at rest)
# - GitHub Actions will use GitHub repository secrets for CI/CD
#
# ============================================================================

# ============================================================================
# REQUIRED: X.AI Grok API Configuration
# ============================================================================
#
# Your actual X.AI API key (get from https://x.ai/api)
#
# Storage location: Vercel dashboard
# Environment scope: Production only
# Visibility: Secret (encrypted in Vercel)
#
# SECURITY NOTE: This is your X.AI account's API key. Guard it carefully!
#   - If exposed: immediately regenerate on https://x.ai/api
#   - Monitor usage on X.AI dashboard to detect unauthorized access
#   - Set up billing alerts to catch unexpected charges
#
XAI_API_KEY=your_actual_xai_api_key_here_in_vercel_dashboard

# ============================================================================
# REQUIRED: Grok Model Configuration
# ============================================================================
#
# Specify which Grok models to use in production.
# These should match your API subscription and testing in preview.
#
# Storage location: Vercel dashboard
# Environment scope: All environments (same across preview & production)
#
# Models tested with:
#   - GROK_TEXT_MODEL: grok-4-fast-reasoning (for prompt generation)
#   - GROK_IMAGE_MODEL: grok-image-generator (for image generation)
#
# Note: If you upgrade your X.AI subscription, you can use:
#   - GROK_TEXT_MODEL: grok-4 (more capable, slower, higher cost)
#   - GROK_IMAGE_MODEL: grok-image-generator (stable, reliable)
#
GROK_TEXT_MODEL=grok-4-fast-reasoning
GROK_IMAGE_MODEL=grok-image-generator

# ============================================================================
# REQUIRED: Application Environment
# ============================================================================
#
# Must be set to 'production' for production deployment.
#
# Storage location: Vercel dashboard
# Environment scope: Production only
# Value: production (no other option for prod)
#
# Effect:
#   - Enables production mode in SvelteKit
#   - Optimizes build for speed
#   - Minimizes logging output
#   - Enables caching headers
#   - May disable source maps (faster page load)
#
NODE_ENV=production

# ============================================================================
# REQUIRED: Mock Services Toggle
# ============================================================================
#
# CRITICAL FOR PRODUCTION: Must be 'false' to use real Grok API
#
# Storage location: Vercel dashboard
# Environment scope: Production only
# Value: false (uses real API, will incur costs)
#
# WARNING - COSTS:
#   - Each prompt generation request: ~$0.001-0.01 depending on model
#   - Each image generation request: ~$0.05-0.20 depending on model
#   - Monitor your X.AI account usage and costs carefully
#   - Set spending limits on your X.AI account to prevent runaway costs
#   - Consider email alerts when usage reaches thresholds
#
# For Preview Environment (Optional):
#   - You can set USE_MOCKS=true to save costs during testing
#   - Preview will use synthetic mock data instead of real API
#   - Allows developers to test without incurring costs
#
USE_MOCKS=false

# ============================================================================
# REQUIRED: Public Application URL
# ============================================================================
#
# The production URL where users will access the application.
#
# Storage location: Vercel dashboard
# Environment scope: Production only
# Value: Your actual production domain
#
# Examples:
#   - https://tarot-up-my-heart.vercel.app (default Vercel domain)
#   - https://www.tarotoutmyheart.com (if using custom domain)
#
# This value is used for:
#   - Generating share links and canonical URLs
#   - API callback URLs
#   - CORS origin validation
#   - Open Graph metadata for social sharing
#
PUBLIC_APP_URL=https://tarot-up-my-heart.vercel.app

# ============================================================================
# OPTIONAL: Analytics Configuration (Production)
# ============================================================================
#
# Enable analytics to monitor user behavior and application performance.
#
# Storage location: Vercel dashboard
# Environment scope: Production only
# Recommended: Yes, for monitoring and optimization
#
# Setup instructions depend on your analytics provider:
#
# For Google Analytics 4:
#   1. Create GA4 property at https://analytics.google.com
#   2. Get measurement ID (G-XXXXXXXXXX)
#   3. Add to Vercel: PUBLIC_ANALYTICS_ID=G-XXXXXXXXXX
#   4. Monitor dashboard for real user metrics
#
# For Plausible:
#   1. Create account at https://plausible.io
#   2. Add your domain (tarot-up-my-heart.vercel.app)
#   3. Add to Vercel: PUBLIC_ANALYTICS_ID=tarot-up-my-heart.vercel.app
#   4. Respects user privacy (no cookie tracking)
#
# For Fathom:
#   1. Create account at https://usefathom.com
#   2. Create site and get Site ID
#   3. Add to Vercel: PUBLIC_ANALYTICS_ID=SITE_ID
#   4. Privacy-first analytics
#
# PUBLIC_ANALYTICS_ID=G-XXXXXXXXXX

# ============================================================================
# OPTIONAL: Error Tracking Configuration (Production)
# ============================================================================
#
# Enable error tracking to monitor application stability and catch bugs.
# HIGHLY RECOMMENDED for production.
#
# Storage location: Vercel dashboard (DSN) + GitHub secrets (auth token)
# Environment scope: Production only
#
# Recommended provider: Sentry (industry standard)
#
# Sentry setup:
#   1. Create account at https://sentry.io (free tier available)
#   2. Create project for "Next.js" or "Svelte"
#   3. Get DSN (looks like: https://key@sentry.io/123456)
#   4. Add to Vercel dashboard: SENTRY_DSN=your_dsn
#   5. Set SENTRY_ENVIRONMENT=production
#   6. Sentry will capture and alert on all errors
#   7. Configure alerts via email/Slack
#   8. Review errors in Sentry dashboard to identify issues
#
# Alternative providers:
#   - LogRocket: Session replay + error tracking
#   - Rollbar: Error monitoring with source maps
#   - Elastic APM: Full observability (more expensive)
#
# SENTRY_DSN=https://key@sentry.io/123456
# SENTRY_ENVIRONMENT=production

# ============================================================================
# OPTIONAL: Rate Limiting (Production)
# ============================================================================
#
# Implement rate limiting to prevent abuse and manage API costs.
#
# Storage location: Vercel dashboard
# Environment scope: Production
# Default: 60 requests per minute per user
#
# Tuning guidelines:
#   - For light traffic (100-1000 users/month): 60 RPM is fine
#   - For moderate traffic (1000-10000 users/month): Consider 30 RPM
#   - For heavy traffic: Implement more sophisticated rate limiting
#   - Monitor actual usage patterns in Vercel analytics
#
# Cost impact:
#   - Each request to generate prompts = 1 API call
#   - Each request to generate images = 1 API call
#   - At 60 RPM: 86,400 requests/day max per user
#   - Multiply by concurrent users to get total API costs
#
# RATE_LIMIT_RPM=60

# ============================================================================
# OPTIONAL: File Upload Limits (Production)
# ============================================================================
#
# Configure file upload limits to prevent abuse and manage storage.
#
# Storage location: Vercel dashboard
# Environment scope: Production
#
# Recommended production values:
#   - MAX_IMAGE_SIZE_MB=5 (smaller = faster uploads, better UX)
#   - MAX_IMAGE_COUNT=3 (limit number of reference images)
#
# Rationale:
#   - Smaller images load faster for users (especially mobile)
#   - Grok API processes smaller images faster
#   - Reduces storage requirements
#   - Prevents accidental large uploads from eating bandwidth
#
# MAX_IMAGE_SIZE_MB=5
# MAX_IMAGE_COUNT=3

# ============================================================================
# OPTIONAL: Debug Logging (Production)
# ============================================================================
#
# Debug logging should be DISABLED in production.
#
# Storage location: Vercel dashboard
# Environment scope: Production (set to false or omit)
# Value: false (disabled)
#
# Why disable:
#   - Verbose logs slow down application
#   - Logs consume storage (Vercel charges for this)
#   - Can expose sensitive information in logs
#   - Error tracking (Sentry) captures important errors anyway
#
# If you need to debug production issues:
#   1. Enable temporarily in Vercel dashboard
#   2. Reproduce the issue
#   3. Check Vercel logs in dashboard
#   4. Disable logging again
#   5. OR use error tracking (Sentry) instead
#
# DEBUG=false

# ============================================================================
# VERCEL ENVIRONMENT VARIABLE SETUP
# ============================================================================
#
# STEP-BY-STEP INSTRUCTIONS:
#
# 1. Access Vercel Dashboard:
#    - Go to https://vercel.com/dashboard
#    - Find "tarot-up-my-heart" project
#
# 2. Open Project Settings:
#    - Click project name → Settings
#    - Select "Environment Variables" from left menu
#
# 3. Add Production Variables:
#    - Click "Add" button
#    - For each required variable:
#      • Name: (e.g., "XAI_API_KEY")
#      • Value: Your actual value (e.g., your API key)
#      • Environment: Select "Production" (or "All" for shared vars)
#      • Click "Add"
#    - CRITICAL: Don't copy placeholder values - use actual production values!
#
# 4. Variables to add:
#    - XAI_API_KEY → Your API key (Production only)
#    - GROK_TEXT_MODEL → grok-4-fast-reasoning (All)
#    - GROK_IMAGE_MODEL → grok-image-generator (All)
#    - NODE_ENV → production (Production)
#    - USE_MOCKS → false (Production)
#    - PUBLIC_APP_URL → Your domain (All)
#
# 5. Optional production variables:
#    - SENTRY_DSN → Your Sentry DSN (Production)
#    - SENTRY_ENVIRONMENT → production (Production)
#    - PUBLIC_ANALYTICS_ID → Your GA/Plausible ID (All)
#
# 6. Optional preview variables (different from production):
#    - Select "Preview" environment for preview-specific settings
#    - Set: USE_MOCKS=true (saves costs in preview)
#    - Set: NODE_ENV=development (helpful for debugging)
#
# 7. Verify setup:
#    - Each variable should appear in the list
#    - Production variables show (Production) badge
#    - Preview variables show (Preview) badge
#    - Shared variables show (All) badge
#
# 8. Deploy:
#    - Vercel automatically redeploys when variables change
#    - Monitor deployment in "Deployments" tab
#    - Check deployment logs for any configuration errors
#    - Visit production URL to verify deployment
#
# ============================================================================
#
# GITHUB SECRETS (for CI/CD, if using GitHub Actions):
#
# 1. Go to GitHub repository settings
# 2. Select "Secrets and variables" → "Actions"
# 3. Click "New repository secret"
# 4. Add secret: XAI_API_KEY (for integration tests)
#    - GitHub Actions uses this for test runs
#    - Vercel deployment uses Vercel dashboard variables instead
#
# ============================================================================
#
# COST MONITORING:
#
# Production will now incur real API costs. Monitor carefully:
#
# 1. X.AI Account (https://x.ai):
#    - Check "API Usage" section
#    - Review monthly costs
#    - Set spending limit/alerts
#    - Generate API key rotation schedule
#
# 2. Vercel Analytics (Vercel Dashboard):
#    - Monitor "Analytics" tab
#    - Track daily request volume
#    - Identify traffic spikes
#    - Monitor function execution time
#
# 3. Budget Planning:
#    - Estimate: ~$0.01 per prompt generation
#    - Estimate: ~$0.10 per image generation
#    - Example: 100 users × 5 creations = $50-500/month
#    - Adjust rate limits if costs exceed budget
#
# 4. Alerts to set up:
#    - X.AI: Monthly usage and cost alerts
#    - Vercel: High execution time alerts
#    - Sentry: Critical error alerts (if configured)
#
# ============================================================================
